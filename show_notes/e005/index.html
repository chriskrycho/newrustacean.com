<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Allocate it where?"><title>show_notes::e005 - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="show_notes" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (f8e566053 2024-06-14)" data-channel="nightly" data-search-js="search-0fe7219eb170c82e.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="icon" href="https://newrustacean.com/favicon.ico"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../show_notes/index.html"><img src="https://newrustacean.com/podcast.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../show_notes/index.html"><img src="https://newrustacean.com/podcast.png" alt="logo"></a><h2><a href="../../show_notes/index.html">show_notes</a><span class="version">0.3.1</span></h2></div><h2 class="location"><a href="#">Module e005</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In crate show_notes</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">show_notes</a>::<wbr><a class="mod" href="#">e005</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/show_notes/e005.rs.html#1-157">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Allocate it where?</p>
<ul>
<li><strong>Date:</strong> November 8, 2015</li>
<li><strong>Subject:</strong> Returning functions from other functions, and thinking
about the stack, the heap, and reference types.</li>
<li><a href="https://www.podtrac.com/pts/redirect.mp3/cdn.newrustacean.com/file/newrustacean/e005.mp3"><strong>Audio</strong></a></li>
</ul>
<p><audio style="width: 100%" title="Allocate it where?" controls preload=metadata src="https://www.podtrac.com/pts/redirect.mp3/cdn.newrustacean.com/file/newrustacean/e005.mp3"></audio></p>
<h2 id="notes"><a class="doc-anchor" href="#notes">§</a>Notes</h2>
<p>This episode, we look at returning functions from other functions, and as
part of that discuss some basics about the stack and the heap—and why we
need to care about them for returning functions.</p>
<p>The functions themselves are not especially interesting; they just show you
the basic form you use to return functions from other functions, and how to
then use them in another function. You’ll want to take a detailed look
instead at the documentation for each (or just read the <a href="/src/show_notes/e005.rs.html">source</a>!),
because that’s where the meat of the discussion in this week’s code is.</p>
<h3 id="corrigenda"><a class="doc-anchor" href="#corrigenda">§</a>Corrigenda</h3>
<ul>
<li>
<p>Steve Klabnik <a href="https://users.rust-lang.org/t/new-rustacean-podcast-e005-allocate-it-where-2015-11-08/3153/13?u=chriskrycho">pointed out</a> that my description of <code>Vector</code>
types as totally heap-allocated was misleading. It’s better to say that
the <em>contents</em> of the <code>Vector</code> – its data – is heap-allocated, while
the memory for the smart pointer and associated metadata are allocated
on the stack. I had this in mind, and sort of alluded to it earlier in
the discussion, but the way I actually said it was misleading at best.</p>
</li>
<li>
<p>Chad Sharp (@crossroads1112 on GitHub) <a href="https://github.com/chriskrycho/newrustacean.com/issues/7">clarified</a> that in C99,
C <em>does</em> support dynamic array allocation, though it became optional for
compilers to implement it as of C11. I forgot about this because I spend
so much of my time dealing with Visual C++, which does not support
dynamic array allocation. (Notably, Visual C does; it is Visual C++
which does not: remember, C and C++ are related but distinct languages.)</p>
</li>
</ul>
<p>Thanks to Steve and Chad for their helpful feedback!</p>
<h2 id="links"><a class="doc-anchor" href="#links">§</a>Links</h2>
<ul>
<li><a href="http://blog.rust-lang.org/2015/10/29/Rust-1.4.html">Rust 1.4 release announcement</a></li>
<li><a href="https://github.com/rust-lang/rfcs/blob/master/text/1214-projections-lifetimes-and-wf.md">“Clarify (and improve) rules for projections and well-formedness”</a></li>
<li><a href="https://github.com/rust-lang/rfcs/issues/1061">MSVC support tracking issue</a></li>
<li><a href="https://github.com/brson/rust/blob/relnotes/RELEASES.md">Rust 1.4 full release notes</a></li>
<li><a href="http://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap">“What and where are the stack and the heap?”</a></li>
</ul>
<h2 id="sponsors"><a class="doc-anchor" href="#sponsors">§</a>Sponsors</h2>
<ul>
<li>reddraggone9</li>
<li><a href="http://podcastinit.com">Chris Patti</a></li>
</ul>
<h3 id="become-a-sponsor"><a class="doc-anchor" href="#become-a-sponsor">§</a>Become a sponsor</h3>
<ul>
<li><a href="https://www.patreon.com/newrustacean" rel="payment">Patreon</a></li>
<li><a href="https://venmo.com/chriskrycho">Venmo</a></li>
<li><a href="https://www.dwolla.com/hub/chriskrycho">Dwolla</a></li>
<li><a href="https://cash.me/$chriskrycho">Cash.me</a></li>
</ul>
<h2 id="follow"><a class="doc-anchor" href="#follow">§</a>Follow</h2>
<ul>
<li>New Rustacean:
<ul>
<li>Twitter: <a href="https://www.twitter.com/newrustacean">@newrustacean</a>
<ul>
<li>App.net: <a href="https://alpha.app.net/newrustacean">@newrustacean</a></li>
</ul>
</li>
<li>Email: <a href="mailto:hello@newrustacean.com">hello@newrustacean.com</a></li>
</ul>
</li>
<li>Chris Krycho
<ul>
<li>Twitter: <a href="https://www.twitter.com/chriskrycho">@chriskrycho</a>
<ul>
<li>App.net: <a href="https://alpha.app.net/chriskrycho">@chriskrycho</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div></details><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.demonstrate_function_returns.html" title="fn show_notes::e005::demonstrate_function_returns">demonstrate_function_returns</a></div><div class="desc docblock-short">Uses the <code>doubler_factory</code> to get a function which doubles a number.</div></li><li><div class="item-name"><a class="fn" href="fn.doubler_closure_factory.html" title="fn show_notes::e005::doubler_closure_factory">doubler_closure_factory</a></div><div class="desc docblock-short">Creates a closure which doubles an integer.</div></li><li><div class="item-name"><a class="fn" href="fn.doubler_factory.html" title="fn show_notes::e005::doubler_factory">doubler_factory</a></div><div class="desc docblock-short">Creates a function which doubles an integer.</div></li></ul></section></div></main><link rel="stylesheet" href="/media-playback.css">
<script type="text/javascript" src="/media-playback.js" defer></script>


</body></html>