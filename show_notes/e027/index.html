<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `e027` mod in crate `show_notes`."><meta name="keywords" content="rust, rustlang, rust-lang, e027"><title>show_notes::e027 - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css"><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="shortcut icon" href="https://newrustacean.com/favicon.ico"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../show_notes/index.html'><div class='logo-container'><img src='https://newrustacean.com/podcast.png' alt='logo'></div></a><p class='location'>Module e027</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li></ul></div><p class='location'><a href='../index.html'>show_notes</a></p><script>window.sidebarCurrent = {name: 'e027', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form js-only"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../src/show_notes/e027.rs.html#1-280' title='goto source code'>[src]</a></span><span class='in-band'>Module <a href='../index.html'>show_notes</a>::<wbr><a class="mod" href=''>e027</a></span></h1><div class='docblock'><p>Trust Me; I Promise!</p>
<ul>
<li><strong>Date:</strong> November 30, 2018</li>
<li><strong>Subject:</strong> An intro to <code>unsafe</code> Rust and Rust's idea of safety.</li>
<li><a href="https://www.podtrac.com/pts/redirect.mp3/f001.backblazeb2.com/file/newrustacean/e027.mp3"><strong>download mp3</strong></a></li>
<li><a href="https://newrustacean.com/show_notes/e027/struct.script"><strong>script</strong></a></li>
</ul>
<p><audio style="width: 100%" title="News: Rust 1.29 and 1.30" controls preload=metadata src="https://www.podtrac.com/pts/redirect.mp3/f001.backblazeb2.com/file/newrustacean/e027.mp3"></p>
<h2 id="show-notes" class="section-header"><a href="#show-notes">Show Notes</a></h2><h3 id="errata" class="section-header"><a href="#errata">Errata</a></h3>
<p>A quick correction: on the show I said that a trait needed to be unsafe when
it had an <code>unsafe fn</code> method. This isn't correct: safe traits can have
unsafe methods, and unsafe traits can exist without any methods at all (as
implied by my reference to <code>Send</code> and <code>Sync</code>). You can see this in practice
in the following example, which compiles just fine!</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">trait</span> <span class="ident">ASafeTrait</span> {
    <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">unsafe_method</span>() {}
}

<span class="kw">unsafe</span> <span class="kw">trait</span> <span class="ident">AnUnsafeTrait</span> {}</pre></div>
<p>The idea of an <code>unsafe</code> trait is that it has some conditions which you must
uphold to safely implement it – again, just as with <code>Send</code> and <code>Sync</code>. In
the case of most traits, this will be because some trait method has
invariants it needs to hold else it would cause undefined behavior. For
another example of this, see the (unstable as of the time of recording)
trait <a href="https://doc.rust-lang.org/nightly/std/iter/trait.TrustedLen.html"><code>std::iter::TrustedLen</code></a>.</p>
<p>Thanks to Rust language team member <a href="https://github.com/centril">@centril</a> for noting this to me after
listening when I was recording the show live!</p>
<h3 id="links" class="section-header"><a href="#links">Links</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/2018-edition/ch19-01-unsafe-rust.html"><em>The Rust Programming Language</em>, Chapter 19: Unsafe</a></li>
<li><a href="https://doc.rust-lang.org/nomicon/README.html">The Nomicon</a></li>
<li><a href="http://nercury.github.io/rust/opengl/tutorial/2018/02/08/opengl-in-rust-from-scratch-00-setup.html">&quot;Rust and OpenGL from Scratch&quot;, by Nerijus Arlauskas</a></li>
</ul>
<h3 id="examples" class="section-header"><a href="#examples">Examples</a></h3><h4 id="borrow-checked-code-in-unsafe" class="section-header"><a href="#borrow-checked-code-in-unsafe">Borrow-checked code in <code>unsafe</code></a></h4>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">f</span> <span class="op">=</span> <span class="ident">String</span>::<span class="ident">from</span>(<span class="string">&quot;foo&quot;</span>);

<span class="kw">unsafe</span> {
    <span class="kw">let</span> <span class="ident">borrowed</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">f</span>;

    <span class="comment">// This would be unsafe and throw an error (before Rust 2018):</span>
    <span class="comment">// let borrow_again = &amp;f;</span>

    <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;{}&quot;</span>, <span class="ident">borrowed</span>);

    <span class="comment">// This would be unsafe and throw an error:</span>
    <span class="comment">// println!(&quot;{}&quot;, borrow_again);</span>
}</pre></div>
<p><a href="https://play.rust-lang.org/?version=beta&amp;mode=release&amp;edition=2018&amp;gist=38d1089cdc3a4148609e9e3bbbfd002c">(See it in a playground)</a></p>
<h5 id="safely-mutating-a-raw-pointer" class="section-header"><a href="#safely-mutating-a-raw-pointer">Safely mutating a raw pointer</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">f</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">new</span>(<span class="number">12</span>);
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">g</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">f</span>);
<span class="ident">g</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="number">10</span>;</pre></div>
<p><a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2015&amp;gist=3a7a9facd0f67d4a590afc3a3ecef95b">(See it in a playground)</a></p>
<h2 id="sponsors" class="section-header"><a href="#sponsors">Sponsors</a></h2>
<p>Thanks to Parity for sponsoring the show again. Go check out their <a href="https://paritytech.io/jobs/"><em><strong>Rust
jobs</strong></em></a>!</p>
<h3 id="patreon-sponsors" class="section-header"><a href="#patreon-sponsors">Patreon Sponsors</a></h3>
<ul>
<li>Adam Green</li>
<li>Aleksey Pirogov</li>
<li>Alexander Payne</li>
<li>Alexander Kryvomaz</li>
<li>Andrew Thompson</li>
<li><a href="https://github.com/adeschamps">Anthony Deschamps</a></li>
<li>Anthony Scotti</li>
<li><a href="https://github.com/behnam">Behnam Esfahbod</a></li>
<li>Benjamin Wasty</li>
<li>Brandon 'Spanky' Mills</li>
<li>Brian Casiello</li>
<li>Brian Manning</li>
<li><a href="https://skife.org/">Brian McCallister</a></li>
<li><a href="http://www.stitthappens.com/">Bryan Stitt</a></li>
<li>Bryce Johnston</li>
<li>Caryn Finkelman</li>
<li>Cass Costello</li>
<li>Chap Lovejoy</li>
<li><a href="https://charlieegan3.com">Charlie Egan</a></li>
<li>Chip</li>
<li><a href="http://red-oxide.org/">Chris Palmer</a></li>
<li>Daniel</li>
<li>Dan Abrams</li>
<li>Daniel Bross</li>
<li><a href="https://twitter.com/daniel_collin">Daniel Collin</a></li>
<li><a href="https://github.com/gisleburt">Daniel Mason</a></li>
<li>David Hewson</li>
<li><a href="https://twitter.com/derekmorr">Derek Morr</a></li>
<li>Doug Reeves</li>
<li>Eugene Bulkin</li>
<li>Fábio Botelho</li>
<li><a href="https://twitter.com/gaveen">Gaveen Prabhasara</a></li>
<li><a href="https://wihlidal.com/">Graham Wihlidal</a></li>
<li><a href="https://hsivonen.fi/">Henri Sivonen</a></li>
<li><a href="https://www.ianmjones.com/">Ian Jones</a></li>
<li>&quot;Jake &quot;&quot;ferris&quot;&quot; Taylor&quot;</li>
<li>Jako Danar</li>
<li>James Cooper</li>
<li>James Hagans II</li>
<li>Jerome Froelich</li>
<li><a href="http://github.com/joar">Joar Wandborg</a>: Joar Wandborg</li>
<li><a href="http://www.cindur.com/">John Rudnick</a></li>
<li>Jon</li>
<li><a href="https://www.coffeeandcode.com/">Jonathan Knapp</a></li>
<li>Jonathan Turner</li>
<li>Joseph Hain</li>
<li>Joseph Marhee</li>
<li>Justin Ossevoort</li>
<li>Kai Yao</li>
<li>Keith Gray</li>
<li>Kilian Rault</li>
<li>Lee Jenkins</li>
<li>Luca Schmid</li>
<li><a href="http://luizirber.org/">Luiz Irber</a></li>
<li>Lukas Eller</li>
<li><a href="https://github.com/epsilonhalbe">Martin Heuschober</a></li>
<li>Masashi Fujita</li>
<li>Matt Rudder</li>
<li>Matthew Brenner</li>
<li>Matthias Ruszala</li>
<li><a href="https://twitter.com/maxjacobson">Max Jacobson</a></li>
<li>Max R.R. Collada</li>
<li><a href="https://github.com/messense">Messense Lv</a></li>
<li>Micael Bergeron</li>
<li><a href="https://www.linkedin.com/in/michaelmcdonnell/">Michael Mc Donnell</a></li>
<li>Michael Sanders</li>
<li><a href="http://influential.co/">Nathan Sculli</a></li>
<li><a href="http://github.com/ncoish">Nick Coish</a></li>
<li>Nick Gideo</li>
<li><a href="https://github.com/nastevens">Nick Stevens</a></li>
<li><a href="https://github.com/n-pochet">Nicolas Pochet</a></li>
<li>Olaf Leidinger</li>
<li>Oliver Uvman</li>
<li><a href="http://oluseyi.info/">Oluseyi Sonaiya</a></li>
<li>Ovidiu Curcan</li>
<li><a href="https://pascalhertleif.de/">Pascal</a></li>
<li><a href="https://twitter.com/patrickod">Patrick O'Doherty</a></li>
<li>Paul Naranja</li>
<li>Paul Osborne</li>
<li>Peter Scholtens</li>
<li>Peter Tillemans</li>
<li>Ralph Giles</li>
<li><a href="http://www.inosion.com">Ramon Buckland</a></li>
<li>Randy MacLeod</li>
<li>Raph Levien</li>
<li>Richard Dallaway</li>
<li>Rob Tsuk</li>
<li>Robert Chrzanowski</li>
<li><a href="http://notryanb.github.io/">Ryan Blecher</a></li>
<li><a href="https://github.com/osialr">Ryan Osial</a></li>
<li>Scott Moeller</li>
<li><a href="https://www.twitter.com/sebasmagri">Sebastián Ramírez Magrí</a></li>
<li><a href="https://www.simonhdickson.com/">Simon Dickson</a></li>
<li>Simon G</li>
<li><a href="https://www.ntnu.edu/employees/steffen.sunde">Steffen Loen Sunde</a></li>
<li>Steve Jenson</li>
<li>Steven Knight</li>
<li>Steven Murawski</li>
<li><a href="http://stuarth.github.io/">Stuart Hinson</a></li>
<li>Tim Brooks</li>
<li>Tim Süberkrüb</li>
<li>Tom Prince</li>
<li>Toolmaker's Guild</li>
<li>Ty Overby</li>
<li>Tyler Harper</li>
<li>Victor Kruger</li>
<li>Will Greenberg</li>
<li><a href="http://willroe.me">William Roe</a></li>
<li>Zak van der Merwe</li>
<li>Zachary Snyder</li>
<li>Zaki</li>
</ul>
<p>(Thanks to the couple people donating who opted out of the reward tier, as
well. You know who you are!)</p>
<h3 id="become-a-sponsor" class="section-header"><a href="#become-a-sponsor">Become a sponsor</a></h3>
<ul>
<li><a href="https://www.patreon.com/newrustacean" rel="payment">Patreon</a></li>
<li><a href="https://venmo.com/chriskrycho">Venmo</a></li>
<li><a href="https://www.dwolla.com/hub/chriskrycho">Dwolla</a></li>
<li><a href="https://cash.me/$chriskrycho">Cash.me</a></li>
<li><a href="https://flattr.com/profile/chriskrycho">Flattr</a></li>
<li><a href="https://paypal.me/chriskrycho">PayPal.me</a></li>
</ul>
<h2 id="contact" class="section-header"><a href="#contact">Contact</a></h2>
<ul>
<li>New Rustacean:
<ul>
<li>Twitter: <a href="https://www.twitter.com/newrustacean">@newrustacean</a></li>
<li>Email: <a href="mailto:hello@newrustacean.com">hello@newrustacean.com</a></li>
</ul>
</li>
<li>Chris Krycho
<ul>
<li>GitHub: <a href="https://github.com/chriskrycho">chriskrycho</a></li>
<li>Twitter: <a href="https://www.twitter.com/chriskrycho">@chriskrycho</a></li>
</ul>
</li>
</ul>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.Script.html" title='show_notes::e027::Script struct'>Script</a></td><td class='docblock-short'><p>e027: I Promise; Trust Me</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><aside id="help" class="hidden"><div><h1 class="hidden">Help</h1><div class="shortcuts"><h2>Keyboard Shortcuts</h2><dl><dt><kbd>?</kbd></dt><dd>Show this help dialog</dd><dt><kbd>S</kbd></dt><dd>Focus the search field</dd><dt><kbd>↑</kbd></dt><dd>Move up in search results</dd><dt><kbd>↓</kbd></dt><dd>Move down in search results</dd><dt><kbd>↹</kbd></dt><dd>Switch tab</dd><dt><kbd>&#9166;</kbd></dt><dd>Go to active search result</dd><dt><kbd>+</kbd></dt><dd>Expand all sections</dd><dt><kbd>-</kbd></dt><dd>Collapse all sections</dd></dl></div><div class="infos"><h2>Search Tricks</h2><p>Prefix searches with a type followed by a colon (e.g., <code>fn:</code>) to restrict the search to a given type.</p><p>Accepted types are: <code>fn</code>, <code>mod</code>, <code>struct</code>, <code>enum</code>, <code>trait</code>, <code>type</code>, <code>macro</code>, and <code>const</code>.</p><p>Search functions by type signature (e.g., <code>vec -> usize</code> or <code>* -> vec</code>)</p><p>Search multiple things at once by splitting your query with comma (e.g., <code>str,u8</code> or <code>String,struct:Vec,test</code>)</p></div></div></aside><link rel="stylesheet" href="/media-playback.css">
<script type="text/javascript" src="/media-playback.js" defer></script>


<script>window.rootPath = "../../";window.currentCrate = "show_notes";</script><script src="../../aliases.js"></script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>